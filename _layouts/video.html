{% include header.html %}

{% assign strpart = page.part | downcase %}
{% assign strNextVideo = page.nextVideo | downcase %}
{% assign strPrevVideo = page.prevVideo | downcase %}

{% for playlist in site.data.videos %}
{% for video in playlist.videos %}
{% if video[0] == strpart and playlist.short == page.playlist %}


{% if video[1].title %}
{% assign title = video[1].title %}
{% else %}
{% assign title = playlist.title | append: " Teil " | append: strpart %}
{% endif %}

<video-js
        id="player"
        class="video-js vjs-big-play-centered"
        controls
        preload="auto"
        style="width: 100%; height: /*57.8em*/43em;"
        poster="/thumbs/{{ playlist.name }}_{{ strpart }}.jpg" data-setup="{}">
    <source src="https://archive.org/download/{{ video[1].hosters.archive.id }}">

    <p class="vjs-no-js">
        To view this video please enable JavaScript, and consider upgrading to a web browser that
        <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
    </p>
</video-js>

<script>window.HELP_IMPROVE_VIDEOJS = false;</script>
<script src="/assets/js/video.min.js"></script>
<script src="/assets/js/videojs.youtube.js"></script>
<script src="/assets/js/videojs.hotkeys.js"></script>
<script src="/assets/js/videojs.titleoverlay.js"></script>
<script>
    videojs("player").ready(function() {
        this.hotkeys({
            volumeStep: 0.1,
            seekStep: 5,
            enableModifiersForNumbers: false
        });
    });

    videojs("player").titleoverlay({
        title: "{{ title }}",  //Title for movie
        floatPosition: "left", //Float left or right (to prevent big play button overlap) (default left)
        margin: "14px", //Margin from top/left/right (default 10px)
        fontSize: "2em", //font size (default 1em)
        debug: false, //true or false. Will output debug messages for title status
    });
</script>

<div class="w3-card w3-padding">
<div class="w3-container">
    {% if page.prevVideo %}

    {% assign prevTitle = playlist.videos[strPrevVideo].title %}
    {% unless prevTitle %}
        {% assign prevTitle = "Teil " | append: strPrevVideo %}
    {% endunless %}

    <a class="w3-left w3-card w3-display-container" style="width: 20.088em" href="/{{ playlist.short }}/{{ page.prevVideo | prepend: '00' | slice: -2, 2 }}">
        <div style="width: 20.088em; height: 11.3em; background: #000000;">
            <img class="w3-display-middle" alt="Thumbnail" src="/thumbs/{{ playlist.name }}_{{ page.prevVideo }}.small.jpg">
        </div>
        <div class="w3-small w3-display-bottommiddle w3-black w3-center w3-opacity-min w3-padding" style="width: 100%;">{{ prevTitle }}</div>
    </a>
    {% endif %}

    {% if page.nextVideo %}
    {% assign available_soon = playlist.videos[strNextVideo].available_soon %}

    {% assign nextTitle = playlist.videos[strNextVideo].title %}
    {% unless nextTitle %}
        {% assign nextTitle = "Teil " | append: strNextVideo %}
    {% endunless %}

    <div
    {% if available_soon %}
        class="w3-grayscale-max w3-opacity w3-right w3-card w3-display-container"
    {% else %}
        class="w3-right w3-card w3-display-container"
    {% endif %}
        style="width: 20.088em;">

    {% unless available_soon %}
    <a href="/{{ playlist.short }}/{{ page.nextVideo | prepend: '00' | slice: -2, 2 }}">
    {% endunless %}
        <div style="width: 20.088em; height: 11.3em; background: #000000;">
            <img class="w3-display-middle" alt="Thumbnail" src="/thumbs/{{ playlist.name }}_{{ page.nextVideo }}.small.jpg">
        </div>
        <div class="w3-small w3-display-bottommiddle w3-black w3-center w3-opacity-min w3-padding" style="width: 100%;">{{ nextTitle }}</div>
    {% unless available_soon %}
    </a>
    {% endunless %}
    </div>
    {% endif %}
</div>

<h1>{{ title }}</h1>

<p class="w3-padding">
    {% for hoster in video[1].hosters %}
    {% if hoster[1].id %}
    {% if hoster[0] == "youtube" %}
    <a class="w3-btn w3-red w3-margin-left w3-margin-right" target="_blank" href="https://youtube.com/watch?v={{ hoster[1].id }}">YouTube</a>
    {% elsif hoster[0] == "twitch" %}
    <a class="w3-btn w3-purple w3-margin-left w3-margin-right" target="_blank" href="https://www.twitch.tv/videos/{{ hoster[1].id }}">Twitch</a>
    {% elsif hoster[0] == "vimeo" %}
    <a class="w3-btn w3-blue w3-margin-left w3-margin-right" target="_blank" href="https://vimeo.com/{{ hoster[1].id }}">Vimeo</a>
    {% elsif hoster[0] == "archive" %}
    <a class="w3-btn w3-black w3-margin-left w3-margin-right" target="_blank" href="https://archive.org/download/{{ hoster[1].id }}">archive.org</a>
    {% elsif hoster[0] == "dropbox" %}
    <a class="w3-btn w3-blue w3-margin-left w3-margin-right" target="_blank" href="https://dl.dropboxusercontent.com/s/{{ hoster[1].id }}">Dropbox</a>
    {% elsif hoster[0] == "openload" %}
    <a class="w3-btn w3-light-blue w3-margin-left w3-margin-right" target="_blank" href="https://openload.co/embed/{{ hoster[1].id }}">openload</a>
    {% endif %}
    {% endif %}
    {% endfor %}
</p>

<p><b>Ver√∂ffentlicht am {{ video[1].date | date_to_string }}</b></p>

<p>{{ video[1].description }}</p>
</div>

{% endif %}
{% endfor %}
{% endfor %}

{% include footer.html %}
